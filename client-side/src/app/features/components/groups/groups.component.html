<div *ngIf="groups">

  <br>

  <br>
  <!-- Filter Input -->
  <div class="container">
    <div class="row justify-content-center">
      <label for="search"></label>
      <input
        class="form-control" type="search" id="search" style="width: 12rem;"
        [(ngModel)]="searchValue" name="search"
        placeholder="Filter" aria-label="Search">
    </div>
  </div>
  <br>

  <!-- User Table -->
  <div class="container text-center ">

    <div class="ml-5 row">
      <button name="createReview" type="submit"
              class="btn btn-outline-success
                  text-center text-monospace font-italic font-weight-bolder"
              data-toggle="modal" data-target="#addReviewBtn"
              data-whatever="@mdo">Create a group
      </button>
    </div>
    <p class="font-weight-bold">List of my groups</p>
    <br>
    <!-- Table  -->
    <table
      class="table table-bordered table-responsive-md table-responsive-lg
    table-responsive-sm table-striped " id="testTable">
      <!-- Table head -->
      <thead class="thead-dark">
      <tr>

        <!-- group number -->
        <th scope="col"># <i class="fa fa-sort-numeric-asc" aria-hidden="true"></i></th>
        <!-- groupName -->
        <th id="username" style="cursor: pointer">Name</th>
        <!-- Role -->
        <th id="role" style="cursor: pointer">Role</th>
        <!-- Action -->
        <th id="action" style="cursor: pointer">Action</th>

      </tr>
      </thead>
      <!-- Table head -->

      <!-- Table body -->
      <tbody id="demo">
      <ng-container *ngFor="let group of groups index as i">

        <tr #idRef id="{{group['groupId']}}">

          <td class="text-monospace font-italic font-weight-bold"> {{i + 1}} </td>

          <td>
            <a
              [routerLinkActive]="['active']" [routerLinkActiveOptions]="{ exact: true }"
              style="cursor: pointer; color: black"
              onmousemove="this.style.fontSize= '3.3vh'"
              onmouseout="this.style.backgroundColor = ''; this.style.color='black';
            this.style.fontSize= ''"
              [routerLink]="['/group', group['groupId']]"
            class="text-monospace font-italic font-weight-bold">
            {{group['groupName']}} </a></td>

          <td class="text-monospace font-italic font-weight-bold" >
            {{group['roleInThisGroup'].role}} </td>
          <td class="text-monospace font-italic">

            <span *ngIf="group['roleInThisGroup'].role === 'admin'">

                    <!-- update and delete group icons  -->
                     <a >

                      <!-- update group icon -->
                       <i class="fa fa-pencil"
                          aria-hidden="true" onmousemove="this.style.cursor = 'pointer';
                       this.style.fontSize= '4.7vh'"
                          onmouseout="this.style.fontSize= ''" style="color: blue"></i>
                     </a>

              <!-- delete group a tag -->
                    <a class="ml-3">

                      <!-- delete group icon -->
                      <i id="" class="fa fa-trash"
                         aria-hidden="true" onmousemove="this.style.cursor = 'pointer';
                       this.style.fontSize= '4.7vh'" onmouseout="this.style.fontSize= ''"
                         style="color: red"></i>
                    </a>
                  </span>

            <span *ngIf="group['roleInThisGroup'].role === 'member'">
              <button type="submit" class="btn btn-outline-danger text-center btn-sm
                      text-monospace font-italic font-weight-bolder">Leave
      </button>
            </span>

          </td>
        </tr>
      </ng-container>
      </tbody>
      <!-- Table body -->
    </table>
  </div>
</div>

<div *ngIf="!groups">
  <app-spinner></app-spinner>
</div>

<!-- create a group modal -->
<div class="modal fade" id="addReviewBtn" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- create a group modal header -->
      <div class="modal-header">
        <h5 class="modal-title ont-weight-bold text-monospace
            font-italic font-weight-bolder h4" id="exampleModalLabel">Create a group</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <!-- create a group modal body-->
      <div class="modal-body">

        <!-- create a group modal form-->
        <form #addGroupForm="ngForm">

          <!-- create a group modal form groupName input -->
          <div class="form-group">
            <label for="groupName" class="font-weight-bold text-monospace
            font-italic font-weight-bolder">Group Name:</label>

            <input #groupNameInput="ngModel"
                   [class.is-invalid]="groupNameInput.invalid && groupNameInput.touched"
                   [class.is-valid]="!(groupNameInput.invalid && groupNameInput.untouched)"
                   class="form-control" type="text" id="groupName"
                   [(ngModel)]="groupName" name="groupName" minlength="4" maxlength="32"
                   placeholder="Le nom du groupe" required>
            <div *ngIf="groupNameInput.errors && (groupNameInput.invalid ||
                        groupNameInput.touched)">
              <small id="groupNameError1" class="text-danger"
                     *ngIf="groupNameInput.errors.minlength">
                {{groupNameInput.value}} la longueur minimale est 4
              </small>
              <small id="groupNameError2" class="text-danger"
                     *ngIf="groupNameInput.errors.required
                      && groupNameInput.touched">Le nom du groupe est requis</small>
            </div>
          </div>

          <!-- create a group modal form groupDescription input -->
          <div class="form-group">
            <label for="groupDescription" class="font-weight-bold
            text-monospace font-italic font-weight-bolder">
              Group Description:</label>

            <!-- groupDescription textarea -->
            <textarea #textArea="ngModel"
                      [class.is-invalid]="textArea.invalid && textArea.touched"
                      class="form-control w-100" id="groupDescription" rows="2"
                      [class.is-valid]="!(textArea.invalid && textArea.untouched)"
                      placeholder="La description du groupe"
                      [(ngModel)]="groupDescription" name="groupDescription" required>
            </textarea>
            <small class="text-danger" [class.d-none]="textArea.valid ||
                textArea.untouched">La description d'un groupe est requise</small>
          </div>


          <!-- create a group modal footer-->
          <div class="modal-footer">

            <!-- form close button -->
            <button type="button"
                    class="btn btn-secondary text-monospace font-italic
                    font-weight-bolder" data-dismiss="modal" id="modalClose">Close
            </button>

            <!-- form submit button -->
            <button (click)="oncreateGroupSubmit()" id="reviewSubmit" type="submit"
                    data-dismiss="modal" class="btn btn-primary text-monospace
                    font-italic font-weight-bolder"
                    [disabled]="addGroupForm.form.invalid">submit
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
