<div *ngIf="groups">

  <br>
  <!-- Filter Input -->
  <div class="container">
    <div class="row justify-content-center">
      <label for="search"></label>
      <input
        class="form-control" type="search" id="search" style="width: 12rem;"
        [(ngModel)]="searchValue" name="search"
        placeholder="Filter" aria-label="Search">
    </div>
  </div>
  <br>

  <!-- User Table -->
  <div class="container text-center ">

    <p class="font-weight-bold">List of my groups</p>

    <!-- Table  -->
    <table
      class="table table-bordered table-responsive-md table-responsive-lg
    table-responsive-sm table-striped " id="testTable">
      <!-- Table head -->
      <thead class="thead-dark">
      <tr>

        <!-- group number -->
        <th scope="col"># <i class="fa fa-sort-numeric-asc" aria-hidden="true"></i></th>
        <!-- groupName -->
        <th id="username" style="cursor: pointer">Name</th>
        <!-- Role -->
        <th id="email" style="cursor: pointer">Role</th>

      </tr>
      </thead>
      <!-- Table head -->

      <!-- Table body -->
      <tbody id="demo">
      <ng-container *ngFor="let group of groups index as i">

        <tr #idRef id="{{group['groupId']}}" (click)="groupDetails(idRef)" data-toggle="modal"
            data-target=".bd-example-modal-lg" style="cursor: pointer"
            onmousemove="this.style.backgroundColor = 'rgba(0, 255, 0, 0.3)';
                      this.style.color='green'"
            onmouseout="this.style.backgroundColor = ''; this.style.color=''">

          <th class="text-monospace font-italic"
              scope="row"> {{i + 1}} </th>
          <th class="text-monospace font-italic" scope="row">
            {{group['groupName']}} </th>
          <th class="text-monospace font-italic" scope="row">
            {{group['roleInThisGroup'].role}} </th>
        </tr>
      </ng-container>
      </tbody>
      <!-- Table body -->
    </table>
  </div>
</div>


<div *ngIf="!groups">
  <app-spinner></app-spinner>
</div>

<!-- group details modal -->
<div *ngIf="groups" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog"
     aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header font-weight-bold">
        <h3 class="text-monospace font-italic"><strong>Group details</strong>
          <p></p>
          <p style="font-size: small" class="blockquote-footer my-0">
            {{groupDescription}}
          </p>
        </h3>

        <!-- log details close modal button -->
        <button type="button" class="close"
                data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="container mt-2 mb-2">
        <div class="modal-body card border-light">

          <div class="d-flex">
            <strong class="text-monospace font-italic font-weight-bolder h5">
              Group members</strong>
            <div class="ml-auto mr-5">
              <div class="row">
                <div class="d-flex">
                  <div class="d-flex justify-content-center">
                    <label for="user"></label>
                    <input
                      class="form-control" id="user"
                      [(ngModel)]="addUser" name="search"
                      placeholder="username" aria-label="Search">
                  </div>
                  <div class="ml-3">
                    <button name="createReview" type="submit"
                            class="btn btn-outline-success
                  text-center text-monospace font-italic font-weight-bolder"
                            data-toggle="modal" id="addReviewBtn"
                            data-target="#addReviewModel" data-whatever="@mdo">Add a member
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <br>

          <div *ngIf="!groupUsers">
            <app-spinner></app-spinner>
          </div>
          <!--Table-->
          <table *ngIf="groupUsers" class="table table-striped w-auto">

            <!--Table head-->
            <thead>
            <tr>
              <!-- group number -->
              <th scope="col">#
                <i class="fa fa-sort-numeric-asc" aria-hidden="true"></i>
              </th>
              <th>username</th>
              <th>email</th>
              <th>role</th>
            </tr>
            </thead>
            <!--Table head-->

            <!-- Table body -->
            <tbody *ngIf="groupUsers" id="demos">
            <ng-container *ngFor="let user of groupUsers index as i">

              <tr>

                <th class="text-monospace font-italic"
                    scope="row"> {{i + 1}} </th>
                <th class="text-monospace font-italic" scope="row">
                  {{user['username']}} </th>
                <th class="text-monospace font-italic" scope="row">
                  {{user['email']}} </th>
                <th class="text-monospace font-italic" scope="row">
                  {{user['roleInThisGroup'].role}} </th>
              </tr>
            </ng-container>
            </tbody>
            <!-- Table body -->
          </table>
          <!--Table-->
          <hr>
          <p class="text-monospace font-italic font-weight-bolder h5">
            <strong>Group shopping list</strong>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>
